PROC RING_GROOVE DISPLON
;环形槽

DRFOF;手轮偏置清除
STOPRE

MSG("砂轮开到起始位置")
G1 G90 X=INI[10] F=300;开到对刀起始位
IF INI[36]==0;砂轮类型选择
    R299=2000
    G4 F0.2
    M13;砂轮启动
ELSE
    M1=3 S1=2000
    WAITS
ENDIF
MSG("等待砂轮转速到位")
G4 F5
M8;开磨削冷却

C_CYCLE:
MSG("头架旋转中...")
G91 C=360000 F=7200;头架旋转
IF $A_DBB[2]==1;如果按下退刀键
    GOTOF RING_END
ENDIF
GOTOB C_CYCLE

RING_END:
DRFOF;手轮偏置清除
M9;关磨削冷却
IF INI[36]==0;砂轮类型选择
    M15
ELSE
    M1=5
ENDIF
G4 F1

RET

