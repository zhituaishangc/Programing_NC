PROC B_JXS_TEST DISPLOF
;;**********程序功能**********
;;模拟测试磨削过程
;;***************************

DEF REAL Z_GRIND_START,Z_GRIND_END,DR0

Z_GRIND_START=INI[28]
Z_GRIND_END=INI[28]-20
DR0=0

MSG("模拟测试中...")

G90 G01 Z=Z_GRIND_START F=3000
G90 G01 X=INI[10] F=3000
G4 F1

WHILE(DR0<=5)
    FGROUP(Z)
    G91 G01 Z=Z_GRIND_END-Z_GRIND_START C=(Z_GRIND_START-Z_GRIND_END)/3.6*360 F=120
    G4 F1
    G90 G01 Z=Z_GRIND_START F=3000
    G4 F1
    DR0=DR0+1
ENDWHILE

STOPRE
IF INI[85]==1;用机械手
    M82
ENDIF

FGROUP(Z)
G91 G01 Z=Z_GRIND_END-Z_GRIND_START C=(Z_GRIND_START-Z_GRIND_END)/3.6*360 F=120
G4 F1
G90 G01 Z=Z_GRIND_START F=3000
G4 F1
G90 G01 X=INI[23] F=3000

RET

