|数组|全局变量|意义
|:----:|:----:|:----:|
|**需要提前手动输入**|
|MD14514[0]|DB4500.DBD2000|模拟量砂轮极限速度
|MD14510[4]|DB4500.DBW8|砂轮风扇停留时间
|DRESSER[35]|WHEEL_MIN_diameter|砂轮最小直径
|PROCESS[11]|X_FEED_SPEED|磨削工件时X进给速度
|||
|**PLC_NC交换变量**|
|$A_DBB[0]|DB4900.DBX0.0|是否修整
|$A_DBB[1]|DB4900.DBX1.0|是否对刀
|$A_DBB[2]|DB4900.DBX2.0|是否退刀
|$A_DBB[3]|DB4900.DBX3.0|液压左开关
|$A_DBB[4]|DB4900.DBX4.0|液压右开关
|MD14510[0]|DB4500.DBW0|润滑间歇时间(1min)
|MD14510[1]|DB4500.DBW2|润滑启动时间(10ms)
|MD14514[0]|DB4500.DBD2000|模拟量砂轮极限速度
|MD14510[4]|DB4500.DBW8|砂轮风扇停留时间
|R299|-->WHEEL_RPM|模拟量砂轮转速
|PLCASUP1|ASUP1|PLC异步子程序-退刀键启动
|||
|**修整主参数(DRESSER)**|
|DRESSER[0]|DRESSWARE|修整器选择(0VW/1XZ/2滚压/3液压)
|DRESSER[1]|ROLLING_VER|滚压轮齿高
|DRESSER[2]|WHEEL_DWHEEL_INTER|两轮中心距
|DRESSER[3]|DWHEEL_MODE|修整轮类型(0单/1双/2方)
|DRESSER[4]|DSHAPE|齿形选择(0三角/1梯形/2双圆弧)
|DRESSER[5]|WHEEL_STA|砂轮状态(0新/1旧)
|DRESSER[6]|DRESS_ALARM|修整报警(0无报警)
|AXIS_VER|AXIS_VER|垂直轴
|AXIS_HORI|AXIS_HORI|水平轴
|DRESSER[9]|DRESS_CUMU|修整累积
|DRESSER[10]|DRESS_FEED|当前速度
|DRESSER[11]|DRESS_TIME_R|粗修次数
|DRESSER[12]|DRESS_TIME_F|精修次数
|DRESSER[13]|DRESS_TIME_ADD|新砂轮初始余量对应修整次数
|DRESSER[14]|DRESS_DEEP_R|粗修进给
|DRESSER[15]|DRESS_DEEP_F|精修进给
|DRESSER[16]|DRESS_FEED_R|粗修速度
|DRESSER[17]|DRESS_FEED_F|精修速度
|DRESSER[18]|DRESS_TIME_RCURNT|当前粗修次数
|DRESSER[19]|DRESS_TIME_FCURNT|当前精修次数
|DRESSER[20]|DRESS_TIME_ACURNT|当前新砂轮抬刀需要修整次数
|DRESSER[21]|WHEEL_MID|修整轮与砂轮中心位置水平坐标
|DRESSER[22]|WHEEL_WIDTH|砂轮宽
|DRESSER[23]|WHEEL_DIA|砂轮直径
|DRESSER[24]|WHEEL_DIACURNT|砂轮当前直径
|||
|DRESSER[25]|D_DRESS_TIME_R|纯修整粗修次数
|DRESSER[26]|D_DRESS_TIME_F|纯修整精修次数
|DRESSER[27]|D_DRESS_DEEP_R|纯修整粗修进给
|DRESSER[28]|D_DRESS_DEEP_F|纯修整精修进给
|DRESSER[29]|D_DRESS_FEED_R|纯修整粗修速度
|DRESSER[30]|D_DRESS_FEED_F|纯修整精修速度
|||
|DRESSER[31]|DWHEEL_RND_L|齿形相对修整轮左圆弧半径
|DRESSER[32]|DWHEEL_RND_R|齿形相对修整轮右圆弧半径
|DRESSER[33]|DWHEEL_MID_L|左修整轮对砂轮中心
|DRESSER[34]|DWHEEL_MID_R|右修整轮对砂轮中心
|DRESSER[35]|WHEEL_MIN_diameter|砂轮最小直径
|DRESSER[36]|DRESS_WHEEL_RPM|修整时砂轮转速
|DRESSER[37]|DRESS_EDGE_INIT|砂轮边缘修整初始位置
|DRESSER[38]|DRESS_EDGE_CURNT|砂轮边缘修整当前位置
|DRESSER[39]|DRESS_EDGE_LEFT|砂轮边缘修整接触砂轮左边缘位置
|DRESSER[40]|DRESS_EDGE_THICK|砂轮边缘修整厚度
|DRESSER[41]|DRESS_EDGE_SAFE|砂轮边缘修整安全深度值
|DRESSER[42]|DRESS_EDGE_DEEP|砂轮边缘修整进给量
|DRESSER[43]|DRESS_EDGE_FEED|砂轮边缘修整速度
|DRESSER[44]|DRESS_EDGE_RESET|砂轮边缘修整当前位置复位信号
|DRESSER[45]|DRESS_EDGE_TIME_TEMP|砂轮边缘修整当前次数临时变量
|DRESSER[46]|DRESS_EDGE_CENTER|金刚笔对准砂轮回转中心X轴位置
|DRESSER[47]|DRESS_EDGE_SAFE_REAL|实际砂轮边缘修整安全深度值
|DRESSER[48]|DRESS_EDGE_SAFE_ADD|实际砂轮边缘修整安全深度多走部分
|||
|**初始化参数(INI)**||
|INI[0]|ROTATION|螺纹旋向(0右旋/1左旋)
|INI[1]|L_POS|工件磨削左端坐标
|INI[2]|R_POS|工件磨削右端坐标
|INI[3]|LENGTH|磨削长度
|INI[4]|SCREW_PITCH|螺距
|INI[5]|SCREW_LEAD|导程
|INI[6]|START_POS|磨削起点
|INI[7]|END_POS|磨削终点
|INI[8]|MIDDLE_Z|磨削中点
|INI[9]|TOTAL_ANGLE|磨削总角度
|INI[10]|QUIT_X|头数切换退刀时的X值
|INI[11]|TAPER|是否有锥度
|INI[12]|TAPER_MOLE|锥度分子
|INI[13]|TAPER_DENO|锥度分母
|INI[14]|TAPER_VALUE|锥度值
|INI[15]|dx|锥度对应的X增量
|INI[16]|is_helix_angle|是否输入螺旋升角
|INI[17]|degree|度
|INI[18]|minute|分
|INI[19]|second|秒
|INI[20]|helix_value|螺旋升角值
|INI[21]|LUB_INTER|润滑间歇时间(中间变量)
|INI[22]|LUB_TIME|润滑启动时间(中间变量)
|INI[23]|QUIT|退刀位置
|INI[24]|PITCH_COM|全长螺距补偿
|INI[25]|QUIT_CALCULATE|退刀计算标志位
|INI[26]|单件/批量模式|单件/批量模式
|||
|**对刀(TOOL_SET)**||
|TOOL_SET[0]|RANDOM_POS|初始对刀点Z轴坐标
|TOOL_SET[1]|FINAL_Z|对刀完成后Z轴坐标(自动对刀)
|TOOL_SET[2]|DRF_Z|对刀完成时手轮偏置值
|TOOL_SET[3]|TOOL_SET_X|完成对刀时砂轮X轴坐标
|TOOL_SET[4]|START_C|计算出的C轴起始角度
|TOOL_SET[5]|START_POS_C|C轴初始角度
|TOOL_SET[6]|PRESENT_C|探头接触工件时C角度
|TOOL_SET[7]|OPERA_METHOD|对刀方式(0手动/1自动)
|TOOL_SET[8]|OPERA_MODEL|对刀类型(0首次/1二次)
|TOOL_SET[9]|MEASUER_R|测头半径
|TOOL_SET[10]|WHL_HEAD|测头与砂轮距离
|TOOL_SET[11]|TOUCH_X|探头接触工件表面时X坐标(自动对刀参数)
|TOOL_SET[12]|WHEEL_TOUCH_X|砂轮接触工件表面时X坐标(自动对刀参数)
|TOOL_SET[13]|PRESENT_X|探头接触工件时X坐标
|TOOL_SET[14]|PRESENT_LZ|探头接触工件槽左侧时Z坐标
|TOOL_SET[15]|PRESENT_RZ|探头接触工件槽右侧时Z坐标
|TOOL_SET[16]|ANG_L|左齿形角
|TOOL_SET[17]|ANG_R|右齿形角
|TOOL_SET[18]|WORK_DEPTH_INIT|工件初开深度
|TOOL_SET[19]|TOOL_SET_POS|(0中点对刀/1起点对刀/2任意)
|TOOL_SET[20]|DRF_X|对刀完成时手轮偏置值
|TOOL_SET[21]|JOG_Z|对刀完成后Z轴坐标(手动对刀)
|||
|**滚轮参数(WHEEL)**||
|WHEEL[0]|DWHEEL_DIA|修整轮直径
|WHEEL[1]|DWHEEL_LINESPEED|修整轮线速度
|WHEEL[2]|DWHEEL_D_INTER|双滚轮间距
|WHEEL[3]|DWHEEL_W_WIDTH|方滚轮厚度
|WHEEL[4]|DWHEEL_S_RND_L|单滚轮左圆弧半径
|WHEEL[5]|DWHEEL_S_RND_R|单滚轮右圆弧半径
|WHEEL[6]|DWHEEL_D_RND_L|双滚轮左圆弧半径
|WHEEL[7]|DWHEEL_D_RND_R|双滚轮右圆弧半径
|WHEEL[8]|DWHEEL_W_RND_L|方滚轮左圆弧半径
|WHEEL[9]|DWHEEL_W_RND_R|方滚轮右圆弧半径
|WHEEL[10]|DRESS_VER_INIT_L|当前左端接触位置
|WHEEL[11]|DRESS_VER_INIT_R|当前右端接触位置
|WHEEL[12]|DWHEEL_TOUCH_L|初始左端接触位置
|WHEEL[13]|DWHEEL_TOUCH_R|初始右端接触位置
|WHEEL[14]|ROLLING_TOUCH|滚压轮接触位置
|WHEEL[15]|DWHEEL_VER_DISTANCE|双滚轮垂直误差
|WHEEL[16]|HY_LEFT|液压左开关
|WHEEL[17]|HY_LEFT|液压右开关
|WHEEL[18]|MOLD_TIME|成型修整轮向下停留时间
|WHEEL[19]|DRESS_RPM|修整轮转速
|||
|**三角齿形(TRI)**||
|TRI[0]|TRIANGLE_VER|齿高
|TRI[1]|TRIANGLE_ANG_LINIT|左角
|TRI[2]|TRIANGLE_ANG_RINIT|右角
|TRI[3]|TRIANGLE_RND_L|左半圆
|TRI[4]|TRIANGLE_RND_R|右半圆
|TRI[5]|TRIANGLE_RND_TL|过渡左圆弧半径
|TRI[6]|TRIANGLE_RND_TR|过渡右圆弧半径
|TRI[7]|TRIANGLE_ANG_LADD|调整左角
|TRI[8]|TRIANGLE_ANG_RADD|调整右角
|TRI[9]|TRIANGLE_ANG_L|当前左角
|TRI[10]|TRIANGLE_ANG_R|当前右角
|||
|**梯形(TRAP)**||
|TRAP[0]|TRAP_VER|齿高
|TRAP[1]|TRAP_VER_BOTM|齿根高度
|TRAP[2]|TRAP_ANG_LINIT|左角
|TRAP[3]|TRAP_ANG_RINIT|右角
|TRAP[4]|TRAP_RND_L|左半圆
|TRAP[5]|TRAP_RND_R|右半圆
|TRAP[6]|TRAP_RND_TL|过渡左圆弧半径
|TRAP[7]|TRAP_RND_TR|过渡右圆弧半径
|TRAP[8]|TRAP_PITCH|齿形螺距
|TRAP[9]|TRAP_ANG_LADD|调整左角
|TRAP[10]|TRAP_ANG_RADD|调整右角
|TRAP[11]|TRAP_ANG_L|当前左角
|TRAP[12]|TRAP_ANG_R|当前右角
|||
|**双圆弧(DARC)**||
|DARC[0]|DARC_VER|齿高
|DARC[1]|DARC_DIA_FACE|外圆直径
|DARC[2]|DARC_DIA_PERFORM|球中心直径
|DARC[3]|DARC_DIA_BALL|钢球直径
|DARC[4]|DARC_ANG_TOUCH|接触角
|DARC[5]|DARC_RND_LINIT|初始滚道左半径
|DARC[6]|DARC_RND_RINIT|初始滚道右半径
|DARC[7]|DARC_RND_LADD|调整滚道左半径
|DARC[8]|DARC_RND_RADD|调整滚道右半径
|DARC[9]|DARC_RND_L|当前滚道左半径
|DARC[10]|DARC_RND_R|当前滚道右半径
|DARC[11]|DARC_RND_T|过渡圆弧半径
|DARC[12]|DARC_RND_LTRANS_HORI|滚道左半径水平偏心
|DARC[13]|DARC_RND_RTRANS_HORI|滚道右半径水平偏心
|DARC[14]|DARC_RND_LTRANS_VER|滚道左半径垂直偏心
|DARC[15]|DARC_RND_RTRANS_VER|滚道右半径垂直偏心
|||
|**磨削参数(GRIND)**||
|GRIND[0]|G_TYPE|磨削类型(0外螺纹/1内螺纹/2蜗杆/3外圆/4环形槽)
|GRIND[1]|DRESS_STA|是否修整(0否/1是)
|GRIND[2]|OPERA_STA|是否对刀(0否/1是)
|GRIND[3]|CYCLE_MODEL|磨削循环类型
|||
|**工序基本参数**||
|PROCESS[0]|TECH_MODEL|工艺类型(0界面/1DIY)
|PROCESS[1]|TECH_NUM|选择工艺
|PROCESS[2]|TECH_NUMCURNT|当前工艺
|PROCESS[3]|TECH_DRESS_FLAG|修整标记(0不修整/1修整)
|PROCESS[4]|WHEEL_POS_CURNT|当前砂轮进入工件位置
|PROCESS[5]|DIY_COUNTER|DIY工序计数
|PROCESS[6]|GRIND_METHOD|单双磨削
|PROCESS[7]|TECH_DRESS_CUMU_CURNT|当前磨削是否修整累计
|PROCESS[8]|TECH_GRIND_DEEP|磨削进给量
|PROCESS[9]|TECH_GRIND_FEED|磨削速度
|PROCESS[10]|WHEEL_LINESPEED_GRIND|磨削砂轮线速度
|PROCESS[11]|X_FEED_SPEED|磨削工件时X进给速度
|PROCESS[12]|GRIND_TOTAL|工艺设定磨削总量
|PROCESS[13]|WHEEL_POS_INI|初始磨削接触位置
|PROCESS[14]|GRID_TOTAL_ACCUMULATION|工艺磨削总量累计
|**工艺表格参数**||
|TECHNOLOGY[0]|GRIND_METHOD_R|粗修单双磨削
|TECHNOLOGY[1]|GRIND_METHOD_MR|半粗修单双磨削
|TECHNOLOGY[2]|GRIND_METHOD_MF|半精修单双磨削
|TECHNOLOGY[3]|GRIND_METHOD_F|精修单双磨削
|||
|TECHNOLOGY[10]|TECH_TIME_R|粗磨次数
|TECHNOLOGY[11]|TECH_TIME_MR|半粗磨次数
|TECHNOLOGY[12]|TECH_TIME_MF|半精磨次数
|TECHNOLOGY[13]|TECH_TIME_F|精磨次数
|||
|TECHNOLOGY[20]|TECH_GRIND_DEEP_R|粗修磨削进给量
|TECHNOLOGY[21]|TECH_GRIND_DEEP_MR|半粗修磨削进给量
|TECHNOLOGY[22]|TECH_GRIND_DEEP_MF|半精修磨削进给量
|TECHNOLOGY[23]|TECH_GRIND_DEEP_F|精修磨削进给量
|||
|TECHNOLOGY[30]|TECH_GRIND_FEED_R|粗修磨削速度
|TECHNOLOGY[31]|TECH_GRIND_FEED_MR|半粗修磨削速度
|TECHNOLOGY[32]|TECH_GRIND_FEED_MF|半精修磨削速度
|TECHNOLOGY[33]|TECH_GRIND_FEED_F|精修磨削速度
|||
|TECHNOLOGY[40]|TECH_DRESS_CUMU_R|粗磨是否修整累计
|TECHNOLOGY[41]|TECH_DRESS_CUMU_MR|半粗磨是否修整累计
|TECHNOLOGY[42]|TECH_DRESS_CUMU_MF|半精磨是否修整累计
|TECHNOLOGY[43]|TECH_DRESS_CUMU_F|精磨是否修整累计
|||
|TECHNOLOGY[50]|WHEEL_LINESPEED_GRIND_R|磨削砂轮线速度
|TECHNOLOGY[51]|WHEEL_LINESPEED_GRIND_MR|磨削砂轮线速度
|TECHNOLOGY[52]|WHEEL_LINESPEED_GRIND_MF|磨削砂轮线速度
|TECHNOLOGY[53]|WHEEL_LINESPEED_GRIND_F|磨削砂轮线速度
|TECHNOLOGY[60]||粗磨头架转速
|TECHNOLOGY[61]||半粗磨头架转速
|TECHNOLOGY[62]||精磨头架转速
|TECHNOLOGY[63]||精磨头架转速
|TECHNOLOGY[70]||粗磨砂轮转速
|TECHNOLOGY[71]||半粗磨砂轮架转速
|TECHNOLOGY[72]||精磨砂轮转速
|TECHNOLOGY[73]||精磨砂轮转速
|||
|**DIY参数**||
|DIY[0]|GRIND_METHOD_DIY|DIY单双磨削
|DIY[1]|TECH_TIME_DIY|DIY磨削次数
|DIY[2]|TECH_GRIND_DEEP_DIY|DIY磨削进给量
|DIY[3]|TECH_GRIND_FEED_DIY|DIY磨削速度
|DIY[4]|TECH_DRESS_CUMU_DIY|DIY是否修整累计
|DIY[5]|WHEEL_LINESPEED_GRIND_DIY|DIY砂轮线速度
|||
|**工件头数参数**||
|WORK[0]|WORK_TH|头数
|WORK[1]|WORK_THCURNT|当前头数
|WORK[2]|WORK_TH_ANG|平均头数角度
|WORK[3]|WORK_TH_ANGCURNT|当前头角度
|||
|**当前磨削次数参数**||
|TECH_TIME[0]|TECH_TIME_RCURNT|当前粗磨次数
|TECH_TIME[1]|TECH_TIME_MRCURNT|当前半粗磨次数
|TECH_TIME[2]|TECH_TIME_MFCURNT|当前半精磨次数
|TECH_TIME[3]|TECH_TIME_FCURNT|当前精磨次数
|TECH_TIME[4]|TECH_TIME_DIYCURNT|当前DIY次数
|||
|**修整进给量参数**||
|TECH_DRESS_DEEP[0]|TECH_DRESS_DEEP|修整进给量
|TECH_DRESS_DEEP[1]|TECH_DRESS_DEEP_R|粗修修整进给量
|TECH_DRESS_DEEP[2]|TECH_DRESS_DEEP_MR|半粗修修整进给量
|TECH_DRESS_DEEP[3]|TECH_DRESS_DEEP_MF|半精修修整进给量
|TECH_DRESS_DEEP[4]|TECH_DRESS_DEEP_F|精修修整进给量
|TECH_DRESS_DEEP[5]|TECH_DRESS_DEEP_DIY|DIY修整进给量
|||
|**修整速度参数**||
|TECH_DRESS_FEED[0]|TECH_DRESS_FEED|修整速度
|TECH_DRESS_FEED[1]|TECH_DRESS_FEED_R|粗修整速度
|TECH_DRESS_FEED[2]|TECH_DRESS_FEED_MR|半粗修整速度
|TECH_DRESS_FEED[3]|TECH_DRESS_FEED_MF|半精修整速度
|TECH_DRESS_FEED[4]|TECH_DRESS_FEED_F|精修整速度
|TECH_DRESS_FEED[5]|TECH_DRESS_FEED_DIY|DIY整速度
|||
|**修整轮线速度参数**||
|WHEEL_LINESPEED_DRESS[0]|WHEEL_LINESPEED_DRESS|修整砂轮线速度
|WHEEL_LINESPEED_DRESS[1]|WHEEL_LINESPEED_DRESS_D|单纯修整砂轮线速度
|WHEEL_LINESPEED_DRESS[2]|WHEEL_LINESPEED_DRESS_TECH|工艺修整砂轮线速度
|WHEEL_LINESPEED_DRESS[3]|WHEEL_LINESPEED_DRESS_R|粗磨修整砂轮线速度
|WHEEL_LINESPEED_DRESS[4]|WHEEL_LINESPEED_DRESS_MR|半粗磨修整砂轮线速度
|WHEEL_LINESPEED_DRESS[5]|WHEEL_LINESPEED_DRESS_MF|半精磨修整砂轮线速度
|WHEEL_LINESPEED_DRESS[6]|WHEEL_LINESPEED_DRESS_F|精磨修整砂轮线速度
|WHEEL_LINESPEED_DRESS[7]|WHEEL_LINESPEED_DRESS_DIY|DIY砂轮线速度
|||
|**磨削修整次数参数**||
|TECH_DRESS_TIME[0]|TECH_DRESS_TIME_R|粗磨修整次数
|TECH_DRESS_TIME[1]|TECH_DRESS_TIME_MR|半粗磨修整次数
|TECH_DRESS_TIME[2]|TECH_DRESS_TIME_MF|半精磨修整次数
|TECH_DRESS_TIME[3]|TECH_DRESS_TIME_F|精磨修整次数
|TECH_DRESS_TIME[4]|TECH_DRESS_TIME_DIY|DIY修整次数
|TECH_DRESS_TIME[5]|TECH_DRESS_TIME|当前磨削修整次数

